<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Nicholas Kosinski{% endblock %}</title>
    <meta property="og:title" content="Nicholas Kosinski">
    <meta property="og:description" content="Managing Director, Odoo US">
    <meta property="og:image" content="https://nicholaskosinski.com/static/images/og-image.png">
    <meta property="og:url" content="https://nicholaskosinski.com">
    <meta property="og:type" content="website">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block head %}{% endblock %}
</head>
<body>
    <nav>
        <a href="/" class="site-name"><img src="{{ url_for('static', filename='images/headshot.png') }}" alt="" class="nav-photo">NK</a>
        <button class="menu-toggle" id="menuToggle" aria-label="Menu">&#9776;</button>
        <div class="nav-links">
            <a href="/" class="{% if request.path == '/' %}active{% endif %}">Home</a>
            <a href="/press" class="{% if request.path == '/press' %}active{% endif %}">My Work</a>
            <a href="/resume" class="{% if request.path == '/resume' %}active{% endif %}">Resume</a>
            <a href="/apps" class="{% if request.path == '/apps' %}active{% endif %}">Apps</a>
            <a href="/activities" class="{% if request.path == '/activities' %}active{% endif %}">Activities</a>
            <a href="/blog" class="{% if '/blog' in request.path %}active{% endif %}">Blog</a>
            <a href="/reading" class="{% if request.path == '/reading' %}active{% endif %}">Reading</a>
            <a href="/terminal" class="{% if request.path == '/terminal' %}active{% endif %}">Terminal</a>
            <a href="/contact" class="{% if request.path == '/contact' %}active{% endif %}">Contact</a>
        </div>
        <div class="nav-widgets">
            <div class="nav-widget" id="quoteWidget">
                <svg class="widget-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9.135 5.015C5.412 6.837 3 9.89 3 13.83c0 2.724 1.782 4.17 3.564 4.17 1.584 0 3.168-1.188 3.168-2.97 0-1.584-1.188-2.772-2.574-2.772-.396 0-.792.099-1.089.297.396-2.376 2.376-4.95 5.067-6.336L9.135 5.015zM19.135 5.015c-3.723 1.822-6.135 4.875-6.135 8.815 0 2.724 1.782 4.17 3.564 4.17 1.584 0 3.168-1.188 3.168-2.97 0-1.584-1.188-2.772-2.574-2.772-.396 0-.792.099-1.089.297.396-2.376 2.376-4.95 5.067-6.336L19.135 5.015z" fill="currentColor"/>
                </svg>
                <div class="widget-tooltip quote-tooltip">
                    <div class="tooltip-text">"{{ daily_quote.text }}"</div>
                    <div class="tooltip-author">â€” {{ daily_quote.author }}</div>
                </div>
            </div>
            <div class="nav-widget" id="songWidget" onclick="togglePlayer(event)">
                <svg class="widget-icon spotify-icon-nav" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z" fill="#1DB954"/>
                </svg>
                <div class="widget-tooltip song-tooltip" id="songTooltip">
                    <div class="tooltip-label">Song of the Day</div>
                    <iframe style="border-radius:12px; margin-top:8px;" src="https://open.spotify.com/embed/track/{{ daily_song.url.split('/')[-1] }}?utm_source=generator&theme=0" width="100%" height="152" frameBorder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
                </div>
            </div>
        </div>
    </nav>

    <div id="page-content">
    {% block content %}{% endblock %}

    {% if not hide_footer %}
    <footer>
        <span>&copy; {{ now.year }} Nicholas Kosinski</span>
        <span>
            <a href="https://www.linkedin.com/in/nicholaskosinski/" target="_blank">LinkedIn</a>
            &middot;
            <a href="https://github.com/nko614" target="_blank">GitHub</a>
        </span>
    </footer>
    {% endif %}
    {% block scripts %}{% endblock %}
    </div>

    <script>
    (function() {
        var toggle = document.getElementById('menuToggle');
        var nav = document.querySelector('.nav-links');
        if (toggle) {
            toggle.addEventListener('click', function() {
                nav.classList.toggle('open');
            });
            nav.querySelectorAll('a').forEach(function(link) {
                link.addEventListener('click', function() {
                    nav.classList.remove('open');
                });
            });
        }
    })();
    </script>
    <script>
    function togglePlayer(e) {
        e.stopPropagation();
        var tooltip = document.getElementById('songTooltip');
        tooltip.classList.toggle('active');
    }
    document.addEventListener('click', function(e) {
        var tooltip = document.getElementById('songTooltip');
        if (tooltip && !document.getElementById('songWidget').contains(e.target)) {
            tooltip.classList.remove('active');
        }
    });
    </script>
    <script>
    (function() {
        function isLocalLink(a) {
            return a.href && a.origin === location.origin && !a.hasAttribute('target') && a.pathname !== location.pathname;
        }

        function updateActiveNav(path) {
            document.querySelectorAll('.nav-links a').forEach(function(a) {
                var href = a.getAttribute('href');
                if (href === path || (href !== '/' && path.startsWith(href))) {
                    a.classList.add('active');
                } else {
                    a.classList.remove('active');
                }
            });
        }

        function execScripts(container) {
            container.querySelectorAll('script').forEach(function(old) {
                var s = document.createElement('script');
                if (old.src) { s.src = old.src; } else { s.textContent = old.textContent; }
                old.parentNode.replaceChild(s, old);
            });
        }

        var currentPath = location.pathname;
        function navigate(url, pushState) {
            var targetPath = new URL(url, location.origin).pathname;
            // Skip if already showing this page (prevents spurious re-renders)
            if (targetPath === currentPath && !pushState) return;
            currentPath = targetPath;
            fetch(url, { headers: { 'X-Requested-With': 'SPA' } }).then(function(res) {
                return res.text();
            }).then(function(html) {
                var doc = new DOMParser().parseFromString(html, 'text/html');
                var newContent = doc.getElementById('page-content');
                var oldContent = document.getElementById('page-content');
                if (newContent && oldContent) {
                    oldContent.innerHTML = newContent.innerHTML;
                    execScripts(oldContent);
                }
                document.title = doc.title;
                if (pushState) {
                    history.pushState({}, '', url);
                }
                updateActiveNav(targetPath);
                // close mobile menu
                var nav = document.querySelector('.nav-links');
                if (nav) nav.classList.remove('open');
                // scroll to top
                window.scrollTo(0, 0);
                // track with GoatCounter
                if (window.goatcounter && window.goatcounter.count) {
                    window.goatcounter.count({ path: targetPath });
                }
            });
        }

        // intercept clicks on nav links and section links
        function attachSpaLinks(container) {
            container.querySelectorAll('a').forEach(function(a) {
                a.addEventListener('click', function(e) {
                    if (isLocalLink(a)) {
                        e.preventDefault();
                        e.stopPropagation();
                        navigate(a.href, true);
                        return false;
                    }
                });
            });
        }
        attachSpaLinks(document.querySelector('.nav-links'));
        attachSpaLinks(document.querySelector('.site-name').parentNode);
        // also handle section-links on homepage (delegated since they're in page-content)
        document.addEventListener('click', function(e) {
            var a = e.target.closest('.section-links a');
            if (a && isLocalLink(a)) {
                e.preventDefault();
                navigate(a.href, true);
            }
        });

        // handle back/forward
        window.addEventListener('popstate', function() {
            navigate(location.href, false);
        });
    })();
    </script>
    <script data-goatcounter="https://nko.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
</body>
</html>
